@page "/memorization-level-one/{CardCollectionId:guid}"

<PageTitle>EasyEnglish | @cardCollection?.Title | Уровень 1</PageTitle>

<MudBreadcrumbs Class="mb-3" Items="breadcrumbItems" />

@if (cardCollection is not null && cards.Count > 0)
{
    <MudText Typo="Typo.h5" Align="Align.Center" Class="mb-5">
        @cardCollection.Title
    </MudText>

    for (var i = 0; i < cards.Count; i++)
    {
        var currentIndex = i;
        <CardLevelOnePaper Card="@(cards[currentIndex])"
                           Index="@(currentIndex + 1)"
                           CardsCount="cardCollection.CardsCount"
                           OtherAnswerVariants="@(GetOtherAnswerVariants(cards[currentIndex].Id))"
                           OnWrongAnswer="@(() => AddWrongCard(cards[currentIndex]))"/>
    }

    if (wrongAnswerCards.Count > 0)
    {
        <MudStack Row AlignItems="AlignItems.Center"
                  Class="mt-5 mb-2" Spacing="2">
            <MudText Typo="Typo.h6">
                Неправильные ответы
            </MudText>
            <MudIconButton Icon="@(isShowWrongCards ? Icons.Material.Outlined.ArrowDropUp : Icons.Material.Outlined.ArrowDropDown)"
                           OnClick="ToggleShowWrongCards"/>
        </MudStack>

        if (isShowWrongCards)
        {
            foreach (var wrongAnswerCard in wrongAnswerCards)
            {
                <CardPaper Card="wrongAnswerCard" ReadOnly/>
            }
        }
    }
}
