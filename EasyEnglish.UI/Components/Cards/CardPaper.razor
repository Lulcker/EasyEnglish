<MudPaper Elevation="3" Class="pa-4 mb-3 position-relative">
    @if (isEditMode)
    {
        <MudTextField Label="Слово на русском"
                      @bind-Value="newRuWord"
                      Variant="Variant.Outlined" Immediate
                      Class="mb-3" AutoFocus
                      OnKeyDown="HandleKeyDown"
                      @ref="newRuWordTextField" />
        
        <MudTextField Label="Слово на английском"
                      @bind-Value="newEnWord"
                      Variant="Variant.Outlined"
                      Class="mb-2" Immediate
                      OnKeyDown="HandleKeyDown"
                      @ref="newEnWordTextField" />
        
        @if (confirmText.IsNotEmpty())
        {
            <MudStack Row AlignItems="AlignItems.Center">
                <MudIcon Icon="@Icons.Material.Filled.Warning"
                         Color="Color.Warning" />
                
                <MudText Color="Color.Warning" Typo="Typo.body1" Class="mt-1 mb-2">
                    @confirmText
                </MudText>
            </MudStack>
        }

        <MudStack Row AlignItems="AlignItems.Center">
            <MudButton OnClick="UnsetAndClearUpdateMode"
                       Color="Color.Primary" Class="mt-1"
                       Variant="Variant.Outlined">
                Отменить
            </MudButton>
                    
            <MudSpacer />
                    
            <MudButton OnClick="SaveAsync"
                       Disabled="IsSaveButtonDisabled"
                       Color="Color.Primary" Class="mt-1"
                       Variant="Variant.Filled">
                @(isConfirmAction ? "Подтвердить" : "Сохранить")
            </MudButton>
        </MudStack>
                
        if (isLoading)
        {
            <MudProgressLinear Color="Color.Primary" Indeterminate="isLoading"
                               Class="mt-2" />
        }
    }
    else
    {
        <MudStack Spacing="1" Class="pt-3">
            <MudText Typo="Typo.h6">
                Слово на русском: <b>@Card.RuWord</b>
            </MudText>
            <MudText Typo="Typo.h6">
                Слово на английском: <b>@Card.EnWord</b>
            </MudText>
        </MudStack>
        
        <MudStack Row AlignItems="AlignItems.Center" Spacing="2" Class="menu-position">
            
            <MudIconButton Icon="@(Card.IsFavorite ? Icons.Material.Filled.Favorite : Icons.Material.Filled.FavoriteBorder)"
                           OnClick="ToggleFavoriteAsync" Size="Size.Small"
                           Color="Color.Error" />
            @if (!ReadOnly)
            {
                <MudMenu Icon="@Icons.Material.Filled.MoreVert" Size="Size.Small" Dense>
                    <MudMenuItem OnClick="SetUpdateMode" IconColor="Color.Primary"
                                 Icon="@Icons.Material.Filled.Edit">
                        Редактировать
                    </MudMenuItem>
                    <MudMenuItem OnClick="MoveAsync" IconColor="Color.Primary"
                                 Icon="@Icons.Material.Filled.Repeat">
                        Переместить
                    </MudMenuItem>
                    <MudMenuItem OnClick="DeleteAsync" IconColor="Color.Error"
                                 Icon="@Icons.Material.Filled.Delete">
                        Удалить
                    </MudMenuItem>
                </MudMenu>
            }
        </MudStack>
    }
</MudPaper>